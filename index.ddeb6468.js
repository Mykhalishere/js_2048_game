var e=function(){var e;function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.initialState=e,this.board=JSON.parse(JSON.stringify(e)),this.score=0,this.status="idle"}return e=[{key:"moveLeft",value:function(){this.move("left")}},{key:"moveRight",value:function(){this.move("right")}},{key:"moveUp",value:function(){this.move("up")}},{key:"moveDown",value:function(){this.move("down")}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.board}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){this.status="playing",this.addRandomTile(),this.addRandomTile()}},{key:"restart",value:function(){this.board=JSON.parse(JSON.stringify(this.initialState)),this.score=0,this.status="idle",this.addRandomTile(),this.addRandomTile()}},{key:"addRandomTile",value:function(){for(var e=[],t=0;t<4;t++)for(var r=0;r<4;r++)0===this.board[t][r]&&e.push({row:t,col:r});if(0!==e.length){var i=e[Math.floor(Math.random()*e.length)],n=i.row,a=i.col;this.board[n][a]=.9>Math.random()?2:4}}},{key:"move",value:function(e){var t=JSON.parse(JSON.stringify(this.board));switch(e){case"left":this.board=this.moveLeftHelper(this.board);break;case"right":this.board=this.moveRightHelper(this.board);break;case"up":this.board=this.moveUpHelper(this.board);break;case"down":this.board=this.moveDownHelper(this.board);break;default:return}JSON.stringify(t)!==JSON.stringify(this.board)&&(this.addRandomTile(),this.checkWin()?this.status="win":this.checkGameOver()&&(this.status="lose"))}},{key:"moveLeftHelper",value:function(e){var t=this;return e.map(function(e){return t.slideTiles(e)})}},{key:"moveRightHelper",value:function(e){var t=this;return e.map(function(e){return t.slideTiles(e.reverse()).reverse()})}},{key:"moveUpHelper",value:function(e){var t=this,r=this.rotateBoard(e).map(function(e){return t.slideTiles(e)});return this.rotateBoard(r,!0)}},{key:"moveDownHelper",value:function(e){var t=this,r=this.rotateBoard(e,!0).map(function(e){return t.slideTiles(e)});return this.rotateBoard(r)}},{key:"slideTiles",value:function(e){for(var t=e.filter(function(e){return 0!==e}),r=0;r<t.length-1;r++)t[r]===t[r+1]&&(t[r]*=2,this.score+=t[r],t.splice(r+1,1),t.push(0));for(;t.length<4;)t.push(0);return t}},{key:"rotateBoard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.map(function(r,i){return r.map(function(r,n){return t?e[3-n][i]:e[n][3-i]})})}},{key:"checkWin",value:function(){return this.board.some(function(e){return e.includes(2048)})}},{key:"checkGameOver",value:function(){var e=this;return!["left","right","up","down"].some(function(r){var i=new t(e.board);return i.move(r),JSON.stringify(i.board)!==JSON.stringify(e.board)})}}],function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}();window.Game=e;
//# sourceMappingURL=index.ddeb6468.js.map
